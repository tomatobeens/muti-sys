webpackJsonp([1],{"0d/w":function(e,r){},"5m3y":function(e,r){},JEGh:function(e,r){},NHnr:function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=n("7+uW"),i={data:function(){return{inputWell:[{name:"JOB1",arrHours:10,arrMins:0,runTimes:25,size:15,need:2},{name:"JOB2",arrHours:10,arrMins:20,runTimes:30,size:60,need:1},{name:"JOB3",arrHours:10,arrMins:30,runTimes:10,size:50,need:3},{name:"JOB4",arrHours:10,arrMins:35,runTimes:20,size:10,need:2},{name:"JOB5",arrHours:10,arrMins:40,runTimes:15,size:30,need:2}],waiting:[],change:!1,record:[],recordBefore:{beforeH:0,beforeM:0},storage:100,tape:4,key:!0,averageTime:[],newName:"",newRunTimes:0,newArrHours:0,newArrMins:0,newNeed:0,newSize:0}},computed:{average:function(){return this.averageTime.reduce(function(e,r){return e+r.turnAroundTime},0)/this.averageTime.length}},methods:{addNewJobIntoInputWell:function(){var e={name:this.newName,arrHours:Number(this.newArrHours),arrMins:Number(this.newArrMins),runTimes:Number(this.newRunTimes),size:Number(this.newSize),need:Number(this.newNeed)};this.inputWell.push(e),window.alert("提交成功")},startProcess:function(){var e=this,r=setInterval(function(){void 0===e.inputWell[0]&&void 0===e.waiting[0]&&(e.recordBefore.beforeM=0,e.recordBefore.beforeH=0,clearInterval(r));var n=void 0;e.addJobIntoWaiting(),n=e.waiting[0];var t=0===e.recordBefore.beforeH?n.runningHours:e.recordBefore.beforeH,i=0===e.recordBefore.beforeH?n.runningMins:e.recordBefore.beforeM;console.log("m:"+i),n.trueM++,n.runningHours=t+Math.floor((i+1)/60),n.runningMins=(i+1)%60,console.log("运行进程的runningMins:"+n.runningMins);var s=n.runningHours,o=n.runningMins;if(console.log("运行进程的runningHours:"+s),console.log("进程当前的运行时间："+n.trueM),n.trueM<n.runTimes)e.recordBefore.beforeH=s,e.recordBefore.beforeM=o,console.log(n.name+"进程还在运行......."+s+":"+o+" trueM:"+n.trueM+" recordBefore.m"+e.recordBefore.beforeM);else if(n.trueM>=n.runTimes){var a={name:n.name,turnAroundTime:60*(s-n.beginHours)+(o-n.beginMins)};e.averageTime.push(a),e.storage+=n.size,e.tape+=n.need,n.endHours=s,n.endMins=o,e.recordBefore.beforeH=s,e.recordBefore.beforeM=o;var l=e.waiting.splice(0,1);e.record.push(l)}},1e3)},addFirstJobToWaiting:function(){if(void 0!==this.inputWell[0]){var e=this.inputWell[0];console.log("addFirstJob："+e.arrMins);var r=this.createPCB(e,0);this.waiting.push(r),this.waiting.sort(this.minFirst("runTimes"))}else console.log("作业队列已经空")},createPCB:function(e,r){this.storage-=e.size,this.tape-=e.need,console.log("waiting[0]:"+this.waiting[0]+"item.arrMins:"+e.arrMins);var n=void 0===this.waiting[0]?e.arrHours:this.recordBefore.beforeH,t=void 0===this.waiting[0]?e.arrMins:this.recordBefore.beforeM;console.log("创建"+e.name+"的开始运行时间:"+t);var i={name:e.name,runTimes:e.runTimes,size:e.size,need:e.need,beginHours:n,beginMins:t,runningHours:n,runningMins:t,endHours:0,endMins:0,trueM:0};return console.log("process.runningMins:"+i.runningMins),this.inputWell.splice(r,1),i},addJobIntoWaiting:function(){var e=this;if(void 0!==e.inputWell[0])if(0===e.recordBefore.beforeH)console.log("添加首进程"),e.addFirstJobToWaiting();else{var r=0,n=0;if(e.inputWell.forEach(function(t,i){(t.arrHours<e.recordBefore.beforeH||t.arrHours===e.recordBefore.beforeH&&t.arrMins<=e.recordBefore.beforeM)&&t.size<=e.storage&&t.need<=e.tape&&(0===r?(n=i,r=t):t.runTimes<r.runTimes&&(n=i,r=t))}),0!==r){console.log("取出输入井的元素名称："+r.name+" 索引："+n);var t=e.createPCB(r,n);console.log("添加抢占进程:"+t.name),e.waiting.push(t),e.waiting.sort(e.minFirst("runTimes")),console.log(e.waiting[0].name+"是首进程")}}},minFirst:function(e){return function(r,n){var t=r[e],i=n[e];return t<i?-1:t>i?1:0}}}},s={render:function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("div",{staticClass:"content-wrapper"},[n("div",{staticClass:"content"},[n("table",{staticClass:"table table-hover table-bordered"},[n("thead",[e._v("作业队列")]),e._v(" "),n("tbody",[e._m(0),e._v(" "),e._l(e.inputWell,function(r,t){return n("tr",{key:t},[n("td",[e._v(e._s(r.name))]),e._v(" "),n("td",[e._v(e._s(r.runTimes))]),e._v(" "),n("td",[e._v(e._s(r.arrHours)+":"+e._s(r.arrMins))]),e._v(" "),n("td",[e._v(e._s(r.need))]),e._v(" "),n("td",[e._v(e._s(r.size))])])})],2)]),e._v(" "),n("table",{staticClass:"table table-hover table-bordered"},[n("thead",[e._v("进程队列")]),e._v(" "),n("tbody",[e._m(1),e._v(" "),e._l(e.waiting,function(r,t){return void 0!==e.waiting[0]?n("tr",{key:t},[n("td",[e._v(e._s(r.name))]),e._v(" "),n("td",[e._v(e._s(r.beginHours)+":"+e._s(r.beginMins))]),e._v(" "),n("td",[e._v(e._s(r.runningHours)+":"+e._s(r.runningMins))]),e._v(" "),n("td",[e._v(e._s(r.need))]),e._v(" "),n("td",[e._v(e._s(r.size))])]):e._e()})],2)]),e._v(" "),n("table",{staticClass:"table table-hover table-bordered"},[n("thead",[e._v("平均周转时间")]),e._v(" "),n("tbody",[e._m(2),e._v(" "),e._l(e.averageTime,function(r,t){return void 0!==e.averageTime[0]?n("tr",{key:t},[n("td",[e._v(e._s(r.name))]),e._v(" "),n("td",[e._v(e._s(r.turnAroundTime))]),e._v(" "),n("td",[e._v(e._s(e.average))])]):e._e()})],2)]),e._v(" "),n("div",{staticClass:"sub"},[n("button",{staticClass:"btn btn-primary",on:{click:e.startProcess}},[e._v("运行")])]),e._v(" "),n("div",{staticClass:"container-fluid"},[n("p",[e._v("提交新作业")]),e._v(" "),n("div",{staticClass:"row"},[n("label",{staticClass:"col-md-2 control-label",attrs:{for:"name"}},[e._v("作业名")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newName,expression:"newName"}],staticClass:"col-md-3",attrs:{type:"text",id:"name",name:""},domProps:{value:e.newName},on:{input:function(r){r.target.composing||(e.newName=r.target.value)}}}),e._v(" "),n("label",{staticClass:"col-md-2 control-label",attrs:{for:"runTimes"}},[e._v("运行时间")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newRunTimes,expression:"newRunTimes"}],staticClass:"col-md-3",attrs:{type:"number",id:"runTimes",name:""},domProps:{value:e.newRunTimes},on:{input:function(r){r.target.composing||(e.newRunTimes=r.target.value)}}})]),e._v(" "),n("div",{staticClass:"row"},[n("label",{staticClass:"col-md-2 control-label",attrs:{for:"arrHours"}},[e._v("到达的小时")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newArrHours,expression:"newArrHours"}],staticClass:"col-md-3 ",attrs:{type:"number",id:"arrHours",name:""},domProps:{value:e.newArrHours},on:{input:function(r){r.target.composing||(e.newArrHours=r.target.value)}}}),e._v(" "),n("label",{staticClass:"col-md-2 control-label",attrs:{for:"arrMins"}},[e._v("到达的分钟")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newArrMins,expression:"newArrMins"}],staticClass:"col-md-3 ",attrs:{type:"number",id:"arrMins",name:""},domProps:{value:e.newArrMins},on:{input:function(r){r.target.composing||(e.newArrMins=r.target.value)}}})]),e._v(" "),n("div",{staticClass:"row"},[n("label",{staticClass:"col-md-2 control-label",attrs:{for:"size"}},[e._v("内存需要")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newSize,expression:"newSize"}],staticClass:"col-md-3",attrs:{type:"number",id:"size",name:""},domProps:{value:e.newSize},on:{input:function(r){r.target.composing||(e.newSize=r.target.value)}}}),e._v(" "),n("label",{staticClass:"col-md-2 control-label",attrs:{for:"need"}},[e._v("磁带机需要")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newNeed,expression:"newNeed"}],staticClass:"col-md-3",attrs:{type:"number",id:"need",name:""},domProps:{value:e.newNeed},on:{input:function(r){r.target.composing||(e.newNeed=r.target.value)}}})]),e._v(" "),n("button",{staticClass:"btn btn-success",on:{click:e.addNewJobIntoInputWell}},[e._v("submit")])])])])},staticRenderFns:[function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("tr",{staticClass:"active"},[n("td",[e._v("作业名")]),e._v(" "),n("td",[e._v("运行时间")]),e._v(" "),n("td",[e._v("到达时间")]),e._v(" "),n("td",[e._v("磁带机需要")]),e._v(" "),n("td",[e._v("内存需要")])])},function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("tr",{staticClass:"active"},[n("td",[e._v("进程名")]),e._v(" "),n("td",[e._v("开始时间")]),e._v(" "),n("td",[e._v("实际运行时间")]),e._v(" "),n("td",[e._v("磁带机需要")]),e._v(" "),n("td",[e._v("内存需要")])])},function(){var e=this.$createElement,r=this._self._c||e;return r("tr",{staticClass:"active"},[r("td",[this._v("作业名")]),this._v(" "),r("td",[this._v("周转时间/min")]),this._v(" "),r("td",[this._v("平均周转时间/min")])])}]};var o={components:{myProject:n("VU/8")(i,s,!1,function(e){n("JEGh")},null,null).exports}},a={render:function(){var e=this.$createElement,r=this._self._c||e;return r("div",{attrs:{id:"app"}},[r("myProject")],1)},staticRenderFns:[]};var l=n("VU/8")(o,a,!1,function(e){n("0d/w")},null,null).exports;n("7t+N"),n("5m3y"),n("qb6w"),n("Bb4J");t.a.config.productionTip=!1,new t.a({el:"#app",components:{App:l},template:"<App/>"})},qb6w:function(e,r){}},["NHnr"]);
//# sourceMappingURL=app.a261b52f75e6fe3c826b.js.map